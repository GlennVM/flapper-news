
/*!
 * Module requirements
 */

<<<<<<< HEAD
var MongooseError = require('../error.js')
=======
var MongooseError = require('../error.js');
>>>>>>> develop

/**
 * Document Validation Error
 *
 * @api private
 * @param {Document} instance
 * @inherits MongooseError
 */

<<<<<<< HEAD
function ValidationError (instance) {
  MongooseError.call(this, "Validation failed");
  Error.captureStackTrace(this, arguments.callee);
  this.name = 'ValidationError';
  this.errors = instance.errors = {};
};
=======
function ValidationError(instance) {
  if (instance && instance.constructor.name === 'model') {
    MongooseError.call(this, instance.constructor.modelName + " validation failed");
  } else {
    MongooseError.call(this, "Validation failed");
  }
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this);
  } else {
    this.stack = new Error().stack;
  }
  this.name = 'ValidationError';
  this.errors = {};
  if (instance) {
    instance.errors = this.errors;
  }
}

/*!
 * Inherits from MongooseError.
 */

ValidationError.prototype = Object.create(MongooseError.prototype);
ValidationError.prototype.constructor = MongooseError;

>>>>>>> develop

/**
 * Console.log helper
 */

<<<<<<< HEAD
ValidationError.prototype.toString = function () {
  var ret = this.name + ': ';
  var msgs = [];

  Object.keys(this.errors).forEach(function (key) {
    if (this == this.errors[key]) return;
    msgs.push(String(this.errors[key]));
  }, this)
=======
ValidationError.prototype.toString = function() {
  var ret = this.name + ': ';
  var msgs = [];

  Object.keys(this.errors).forEach(function(key) {
    if (this == this.errors[key]) return;
    msgs.push(String(this.errors[key]));
  }, this);
>>>>>>> develop

  return ret + msgs.join(', ');
};

/*!
<<<<<<< HEAD
 * Inherits from MongooseError.
 */

ValidationError.prototype.__proto__ = MongooseError.prototype;

/*!
=======
>>>>>>> develop
 * Module exports
 */

module.exports = exports = ValidationError;
